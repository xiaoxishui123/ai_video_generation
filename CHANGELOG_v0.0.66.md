# Changelog v0.0.66 - 智能时长参数修复

## 发布日期
2026-01-05

## 🔧 修复内容

### 智能时长参数澄清

根据火山方舟官方确认：

| 时长模式 | API 参数 | 说明 |
|---------|---------|------|
| **智能时长** | 不传 `--dur` | 模型根据提示词内容自动决定时长 |
| **按秒数** | `--dur 5` | 指定固定时长（2-12秒） |
| **按帧数** | `--frames 120` | 指定帧数（优先级高于 `--dur`） |

### 代码修复

1. **移除无效的 `smart_duration` 参数**
   - 火山方舟 API 不认识 `smart_duration: True` 这个参数
   - 智能时长的正确做法是：不传 `--dur` 参数

2. **帧数模式参数修正**
   - 之前：`--dur {frames}` （错误）
   - 现在：`--frames {frames}` （正确）

3. **配音模式优化**
   - 启用配音时，不传递 `--dur` 参数
   - 让模型根据配音文本长度自动决定视频时长

## 📝 官方文档说明

> 若未指定时长，模型将根据提示词内容自动生成合理时长（通常为5秒左右）。
>
> 若同时指定 `--dur` 和 `--frames`，`--frames` 优先级更高。
>
> 参考：[创建视频生成任务API文档](https://www.volcengine.com/docs/82379/1520757)

## 🎯 预期效果

| 配音文字 | 预期视频时长 |
|---------|------------|
| 30字 | ~5秒 |
| 60字 | ~10秒 |
| 100字 | ~12秒（最大值）|

## ⚠️ 注意事项

- Seedance 系列模型最大支持 **12秒** 视频时长
- 配音文本过长时建议拆分成多个场景
- 火山方舟配音功能仅 Seedance 1.5 Pro 支持

## 📦 升级方式

1. 下载 `ai_video_generation-v0.0.66.difypkg`
2. 在 Dify 后台更新插件
3. 重新测试工作流

