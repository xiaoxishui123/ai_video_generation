# ğŸ”§ ç«å±±æ–¹èˆŸæ¨¡å‹å‚æ•°ä¼ é€’é—®é¢˜ä¿®å¤æŠ¥å‘Š

**ä¿®å¤æ—¶é—´**: 2026-01-04  
**ä¿®å¤èŒƒå›´**: æ–‡ç”Ÿè§†é¢‘(T2V)å’Œå›¾ç”Ÿè§†é¢‘(I2V)æ¨¡å‹çš„å‚æ•°ä¼ é€’  
**å‚è€ƒæ–‡æ¡£**: https://www.volcengine.com/docs/82379/1366799

---

## âŒ å‘ç°çš„ä¸¥é‡é—®é¢˜

### é—®é¢˜1ï¼šå›¾ç”Ÿè§†é¢‘ - durationå‚æ•°ä½ç½®é”™è¯¯
**ä½ç½®**: `tools/image_to_video.py` ç¬¬ 641-647 è¡Œ

**é—®é¢˜æè¿°**:
- âŒ **é”™è¯¯åšæ³•**: durationå‚æ•°è¢«æ·»åŠ åˆ°promptä¸­ï¼ˆ`--dur {dur_val}`ï¼‰
- âœ… **æ­£ç¡®åšæ³•**: durationå‚æ•°åº”é€šè¿‡`parameters`å¯¹è±¡ä¼ é€’ï¼ˆæ•´æ•°ç±»å‹ï¼‰

**ä¿®å¤å‰**:
```python
# é”™è¯¯ï¼šdurationæ·»åŠ åˆ°promptä¸­
full_prompt += f" --dur {dur_val}"
```

**ä¿®å¤å**:
```python
# æ­£ç¡®ï¼šdurationé€šè¿‡parametersä¼ é€’
api_parameters["duration"] = int(duration)
```

---

### é—®é¢˜2ï¼šå›¾ç”Ÿè§†é¢‘ - aspect_ratioå‚æ•°ä¸åº”ä¼ é€’
**ä½ç½®**: `tools/image_to_video.py` ç¬¬ 649-652 è¡Œ

**é—®é¢˜æè¿°**:
- âŒ **é”™è¯¯åšæ³•**: aspect_ratioå‚æ•°è¢«æ·»åŠ åˆ°promptä¸­ï¼ˆ`--ratio {aspect_ratio}`ï¼‰
- âœ… **æ­£ç¡®åšæ³•**: å›¾ç”Ÿè§†é¢‘(I2V)çš„æ¯”ä¾‹ç”±è¾“å…¥å›¾ç‰‡å†³å®šï¼Œä¸éœ€è¦ä¼ é€’aspect_ratioå‚æ•°

**ä¿®å¤å‰**:
```python
# é”™è¯¯ï¼šaspect_ratioæ·»åŠ åˆ°promptä¸­
if aspect_ratio:
    full_prompt += f" --ratio {aspect_ratio}"
```

**ä¿®å¤å**:
```python
# æ­£ç¡®ï¼šå›¾ç”Ÿè§†é¢‘ä¸éœ€è¦aspect_ratioå‚æ•°
# âš ï¸ æ³¨æ„ï¼šå›¾ç”Ÿè§†é¢‘(I2V)çš„æ¯”ä¾‹ç”±è¾“å…¥å›¾ç‰‡å†³å®šï¼Œä¸éœ€è¦ä¼ é€’ aspect_ratio å‚æ•°
# å¦‚æœæ¨¡å‹æ”¯æŒè‡ªé€‚åº”æ¯”ä¾‹ï¼ŒAPIä¼šè‡ªåŠ¨å¤„ç†
```

---

### é—®é¢˜3ï¼šæ–‡ç”Ÿè§†é¢‘ - aspect_ratioå‚æ•°ä½ç½®é”™è¯¯
**ä½ç½®**: `tools/text_to_video.py` ç¬¬ 585-587 è¡Œ

**é—®é¢˜æè¿°**:
- âŒ **é”™è¯¯åšæ³•**: aspect_ratioå‚æ•°è¢«æ·»åŠ åˆ°promptä¸­ï¼ˆ`--ratio {aspect_ratio}`ï¼‰
- âœ… **æ­£ç¡®åšæ³•**: aspect_ratioå‚æ•°åº”é€šè¿‡`parameters`å¯¹è±¡ä¼ é€’

**ä¿®å¤å‰**:
```python
# é”™è¯¯ï¼šaspect_ratioæ·»åŠ åˆ°promptä¸­
if aspect_ratio:
    full_prompt += f" --ratio {aspect_ratio}"
```

**ä¿®å¤å**:
```python
# æ­£ç¡®ï¼šaspect_ratioé€šè¿‡parametersä¼ é€’
if aspect_ratio:
    api_parameters["aspect_ratio"] = aspect_ratio
```

---

## âœ… ä¿®å¤åçš„æ­£ç¡®å‚æ•°ä¼ é€’æ–¹å¼

### å›¾ç”Ÿè§†é¢‘ (I2V) - å‚æ•°ç»“æ„

```json
{
  "model": "doubao-seedance-1-5-pro-251215",
  "content": [
    {"type": "image_url", "image_url": {"url": "..."}},
    {"type": "text", "text": "è§†é¢‘æè¿°æ–‡æœ¬"}
  ],
  "parameters": {
    "duration": 5,                    // âœ… æ•´æ•°ç±»å‹
    "resolution": "1080p",            // âœ… å­—ç¬¦ä¸²ç±»å‹
    "generate_audio": "true",          // âœ… å­—ç¬¦ä¸² "true"ï¼ˆä¸æ˜¯å¸ƒå°”å€¼ï¼‰
    "audio_url": "https://..."        // âœ… å¯é€‰ï¼šè‡ªå®šä¹‰éŸ³é¢‘URL
  }
}
```

**æ³¨æ„**:
- âœ… `duration`: é€šè¿‡`parameters`ä¼ é€’ï¼Œæ•´æ•°ç±»å‹
- âœ… `resolution`: é€šè¿‡`parameters`ä¼ é€’ï¼Œå­—ç¬¦ä¸²ç±»å‹
- âœ… `generate_audio`: é€šè¿‡`parameters`ä¼ é€’ï¼Œå­—ç¬¦ä¸²`"true"`ï¼ˆä¸æ˜¯å¸ƒå°”å€¼`True`ï¼‰
- âŒ `aspect_ratio`: **ä¸ä¼ é€’**ï¼ˆå›¾ç”Ÿè§†é¢‘ç”±å›¾ç‰‡å†³å®šæ¯”ä¾‹ï¼‰

---

### æ–‡ç”Ÿè§†é¢‘ (T2V) - å‚æ•°ç»“æ„

```json
{
  "model": "doubao-seedance-1-0-lite-t2v-250428",
  "content": [
    {"type": "text", "text": "è§†é¢‘æè¿°æ–‡æœ¬"}
  ],
  "parameters": {
    "duration": 5,                    // âœ… æ•´æ•°ç±»å‹
    "resolution": "1080p",            // âœ… å­—ç¬¦ä¸²ç±»å‹
    "aspect_ratio": "16:9",           // âœ… å­—ç¬¦ä¸²ç±»å‹ï¼ˆæ–‡ç”Ÿè§†é¢‘æ”¯æŒï¼‰
    "camera_control": "fixed"          // âœ… å¯é€‰ï¼šé•œå¤´æ§åˆ¶
  }
}
```

**æ³¨æ„**:
- âœ… `duration`: é€šè¿‡`parameters`ä¼ é€’ï¼Œæ•´æ•°ç±»å‹
- âœ… `resolution`: é€šè¿‡`parameters`ä¼ é€’ï¼Œå­—ç¬¦ä¸²ç±»å‹
- âœ… `aspect_ratio`: é€šè¿‡`parameters`ä¼ é€’ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼ˆæ–‡ç”Ÿè§†é¢‘æ”¯æŒï¼‰
- âœ… `camera_control`: é€šè¿‡`parameters`ä¼ é€’ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼ˆå¯é€‰ï¼‰

---

## ğŸ“‹ å‚æ•°ä¼ é€’è§„åˆ™æ€»ç»“

æ ¹æ®ç«å±±æ–¹èˆŸå®˜æ–¹æ–‡æ¡£ï¼Œæ‰€æœ‰å‚æ•°åº”éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

1. **å‚æ•°ä½ç½®**: æ‰€æœ‰å‚æ•°åº”é€šè¿‡`parameters`å¯¹è±¡ä¼ é€’ï¼Œ**ä¸åº”**æ·»åŠ åˆ°`prompt`æ–‡æœ¬ä¸­
2. **å‚æ•°ç±»å‹**:
   - `duration`: æ•´æ•°ç±»å‹ï¼ˆå¦‚ï¼š`5`ï¼‰
   - `resolution`: å­—ç¬¦ä¸²ç±»å‹ï¼ˆå¦‚ï¼š`"1080p"`ï¼‰
   - `aspect_ratio`: å­—ç¬¦ä¸²ç±»å‹ï¼ˆå¦‚ï¼š`"16:9"`ï¼‰ï¼Œ**ä»…æ–‡ç”Ÿè§†é¢‘æ”¯æŒ**
   - `generate_audio`: å­—ç¬¦ä¸²ç±»å‹ï¼ˆå¦‚ï¼š`"true"`ï¼‰ï¼Œ**ä»…å›¾ç”Ÿè§†é¢‘æ”¯æŒ**
   - `camera_control`: å­—ç¬¦ä¸²ç±»å‹ï¼ˆå¦‚ï¼š`"fixed"`ï¼‰ï¼Œ**ä»…æ–‡ç”Ÿè§†é¢‘æ”¯æŒ**

3. **å›¾ç”Ÿè§†é¢‘ vs æ–‡ç”Ÿè§†é¢‘**:
   - å›¾ç”Ÿè§†é¢‘(I2V): æ¯”ä¾‹ç”±å›¾ç‰‡å†³å®šï¼Œä¸éœ€è¦`aspect_ratio`å‚æ•°
   - æ–‡ç”Ÿè§†é¢‘(T2V): éœ€è¦`aspect_ratio`å‚æ•°æŒ‡å®šè§†é¢‘æ¯”ä¾‹

---

## ğŸ” ä¿®å¤çš„æ–‡ä»¶

1. **`tools/image_to_video.py`**
   - âœ… ä¿®å¤durationå‚æ•°ä¼ é€’æ–¹å¼ï¼ˆä»promptç§»é™¤ï¼Œæ”¹ä¸ºparametersï¼‰
   - âœ… ç§»é™¤aspect_ratioå‚æ•°ï¼ˆå›¾ç”Ÿè§†é¢‘ä¸éœ€è¦ï¼‰
   - âœ… æ›´æ–°æ³¨é‡Šè¯´æ˜

2. **`tools/text_to_video.py`**
   - âœ… ä¿®å¤aspect_ratioå‚æ•°ä¼ é€’æ–¹å¼ï¼ˆä»promptç§»é™¤ï¼Œæ”¹ä¸ºparametersï¼‰
   - âœ… æ›´æ–°æ³¨é‡Šè¯´æ˜

---

## âœ… éªŒè¯æ¸…å•

- [x] durationå‚æ•°é€šè¿‡parametersä¼ é€’ï¼ˆå›¾ç”Ÿè§†é¢‘å’Œæ–‡ç”Ÿè§†é¢‘ï¼‰
- [x] resolutionå‚æ•°é€šè¿‡parametersä¼ é€’ï¼ˆå›¾ç”Ÿè§†é¢‘å’Œæ–‡ç”Ÿè§†é¢‘ï¼‰
- [x] aspect_ratioå‚æ•°é€šè¿‡parametersä¼ é€’ï¼ˆä»…æ–‡ç”Ÿè§†é¢‘ï¼‰
- [x] å›¾ç”Ÿè§†é¢‘ä¸ä¼ é€’aspect_ratioå‚æ•°
- [x] generate_audioå‚æ•°æ ¼å¼æ­£ç¡®ï¼ˆå­—ç¬¦ä¸²"true"ï¼‰
- [x] æ‰€æœ‰å‚æ•°ä¸å†æ·»åŠ åˆ°promptä¸­
- [x] ä»£ç æ³¨é‡Šå·²æ›´æ–°
- [x] æ— è¯­æ³•é”™è¯¯

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å‚æ•°æ ¼å¼**:
   - `generate_audio`å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²`"true"`ï¼Œä¸èƒ½ä½¿ç”¨å¸ƒå°”å€¼`True`
   - `duration`å¿…é¡»ä½¿ç”¨æ•´æ•°ç±»å‹ï¼Œä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²

2. **å›¾ç”Ÿè§†é¢‘ç‰¹æ®Šè¯´æ˜**:
   - å›¾ç”Ÿè§†é¢‘çš„æ¯”ä¾‹ç”±è¾“å…¥å›¾ç‰‡å†³å®šï¼ŒAPIä¼šè‡ªåŠ¨é€‚é…
   - ä¸éœ€è¦ä¼ é€’`aspect_ratio`å‚æ•°

3. **æ–‡ç”Ÿè§†é¢‘ç‰¹æ®Šè¯´æ˜**:
   - æ–‡ç”Ÿè§†é¢‘éœ€è¦æ˜ç¡®æŒ‡å®š`aspect_ratio`å‚æ•°
   - æ”¯æŒçš„å®½é«˜æ¯”ï¼š`16:9`ã€`9:16`ã€`1:1`ç­‰

---

## ğŸ”— ç›¸å…³èµ„æº

- **ç«å±±æ–¹èˆŸè§†é¢‘ç”Ÿæˆæ–‡æ¡£**: https://www.volcengine.com/docs/82379/1366799
- **Video Generation API æ–‡æ¡£**: https://www.volcengine.com/docs/82379/1520758

---

**æœ€åæ›´æ–°**: 2026-01-04  
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ

